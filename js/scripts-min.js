for(var purchaseButtons=document.querySelectorAll(".add-to-cart"),bookmateButtons=document.querySelectorAll(".add-to-bookmates"),purchasePopup=document.querySelector(".purchase"),purchaseResume=document.querySelector(".resume-purchase"),purchaseClose=document.querySelector(".purchase .close"),bookmates=document.querySelector(".bookmates"),bookmatesCount=document.querySelector(".bookmates span"),cart=document.querySelector(".cart"),cartCount=document.querySelector(".cart span"),i=0;i<purchaseButtons.length;i++)purchaseButtons[i].addEventListener("click",function(e){e.preventDefault(),purchasePopup.classList.add("popup-show"),cart.classList.add("shopping-link-active"),cartCount.innerHTML=parseInt(cartCount.innerHTML)+1});for(i=0;i<bookmateButtons.length;i++)bookmateButtons[i].addEventListener("click",function(e){e.preventDefault(),bookmates.classList.add("shopping-link-active"),bookmatesCount.innerHTML=parseInt(bookmatesCount.innerHTML)+1});purchaseResume.addEventListener("click",function(e){e.preventDefault(),purchasePopup.classList.remove("popup-show")}),purchaseClose.addEventListener("click",function(e){e.preventDefault(),purchasePopup.classList.remove("popup-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),purchasePopup.classList.contains("popup-show")&&(purchasePopup.classList.remove("popup-show"),purchasePopup.classList.remove("feedback-error")))});var button=document.querySelector(".feedback-button"),popup=document.querySelector(".feedback"),close=document.querySelector(".feedback .close"),form=document.querySelector(".feedback form"),inputName=document.querySelector("#message-name"),inputEmail=document.querySelector("#message-email"),inputMessage=document.querySelector("#message-content"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("popup-show"),storageName?(inputName.value=storageName,storageEmail?(inputEmail.value=storageEmail,inputMessage.focus()):inputEmail.focus()):inputName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("feedback-error")}),form.addEventListener("submit",function(e){inputName.value&&inputEmail.value&&inputMessage.value?isStorageSupport&&(localStorage.setItem("name",inputName.value),localStorage.setItem("email",inputEmail.value)):(e.preventDefault(),popup.classList.remove("feedback-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("feedback-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("popup-show")&&(popup.classList.remove("popup-show"),popup.classList.remove("feedback-error")))});var buttonMap=document.querySelector(".map"),popupMap=document.querySelector(".bigmap"),closeMap=document.querySelector(".bigmap .close");buttonMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("popup-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("popup-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupMap.classList.contains("popup-show")&&(popupMap.classList.remove("popup-show"),popupMap.classList.remove("feedback-error")))});